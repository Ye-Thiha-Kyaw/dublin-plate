<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gourmet Delight - Online Order</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #e63946;
            --secondary-color: #f1faee;
            --dark-color: #1d3557;
            --light-color: #a8dadc;
            --highlight-color: #457b9d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        header {
            background-color: var(--dark-color);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .logo span {
            color: var(--primary-color);
        }

        .header-actions {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .cart-icon, .history-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
        }

        .cart-count, .history-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .menu-section, .history-section {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
        }

        .history-section {
            display: none;
        }

        h2 {
            color: var(--dark-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }

        .menu-categories {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .category-btn {
            padding: 0.5rem 1rem;
            background-color: var(--secondary-color);
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark-color);
            transition: all 0.3s;
        }

        .category-btn.active, .category-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .menu-item {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .item-image {
            height: 180px;
            overflow: hidden;
        }

        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .menu-item:hover .item-image img {
            transform: scale(1.05);
        }

        .item-details {
            padding: 1rem;
        }

        .item-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
        }

        .item-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-price {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .add-to-cart {
            background-color: var(--dark-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .add-to-cart:hover {
            background-color: var(--highlight-color);
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-btn {
            width: 25px;
            height: 25px;
            border: none;
            background-color: var(--light-color);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .quantity-input {
            width: 30px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 0.2rem;
        }

        .customer-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        input, textarea, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .cart-items {
            margin-bottom: 1.5rem;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item-details {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            overflow: hidden;
        }

        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-name {
            font-weight: 600;
        }

        .cart-item-price {
            color: var(--primary-color);
            font-weight: 600;
        }

        .remove-item {
            color: #999;
            cursor: pointer;
            transition: color 0.3s;
        }

        .remove-item:hover {
            color: var(--primary-color);
        }

        .cart-summary {
            background-color: var(--secondary-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .total {
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--dark-color);
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #ddd;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 1.5rem;
        }

        .checkout-btn:hover {
            background-color: #c1121f;
        }

        .empty-cart {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        .delivery-options {
            margin-bottom: 1.5rem;
        }

        .delivery-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .payment-methods {
            margin-top: 1.5rem;
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .special-notes {
            margin-top: 1.5rem;
        }

        .hidden {
            display: none;
        }

        /* Cart Popup Styles */
        .cart-popup {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 500px;
            height: 100vh;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            transition: right 0.3s ease-in-out;
            z-index: 1000;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .cart-popup.active {
            right: 0;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }

        .cart-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .close-cart {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--dark-color);
        }

        /* Order History Styles */
        .history-item {
            background-color: var(--secondary-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light-color);
        }

        .history-date {
            font-weight: bold;
            color: var(--dark-color);
        }

        .history-total {
            color: var(--primary-color);
            font-weight: bold;
        }

        .history-items {
            margin-top: 1rem;
        }

        .history-item-row {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed #ddd;
        }

        .history-item-name {
            font-weight: 500;
        }

        .history-item-price {
            color: var(--dark-color);
        }

        .history-summary {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--light-color);
        }

        .history-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .no-history {
            text-align: center;
            padding: 2rem;
            color: #666;
        }

        @media (max-width: 768px) {
            .customer-info {
                grid-template-columns: 1fr;
            }
            
            .menu-grid {
                grid-template-columns: 1fr 1fr;
            }

            .cart-popup {
                width: 90%;
            }

            .history-header {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .header-actions {
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Dublin<span>Plate</span></div>
        <div class="header-actions">
            <div class="history-icon" title="Order History">
                <i class="fas fa-history"></i>
                <span class="history-count">0</span>
            </div>
            <div class="cart-icon" title="Your Cart">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="menu-section">
            <h2>Our Menu</h2>
            <div class="menu-categories">
                <button class="category-btn active" data-category="all">All Items</button>
                <button class="category-btn" data-category="starters">Starters</button>
                <button class="category-btn" data-category="mains">Main Courses</button>
                <button class="category-btn" data-category="desserts">Desserts</button>
                <button class="category-btn" data-category="drinks">Drinks</button>
            </div>
            <div class="menu-grid">
                <!-- Menu items will be added dynamically with JavaScript -->
            </div>
        </section>

        <section class="history-section">
            <h2>Your Order History</h2>
            <div class="history-list">
                <!-- Order history will be added dynamically -->
                <div class="no-history">
                    <p>You haven't placed any orders yet.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Cart Popup -->
    <div class="cart-overlay"></div>
    <div class="cart-popup">
        <button class="close-cart">&times;</button>
        <h2>Your Order</h2>
        <div class="customer-info">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email">
            </div>
            <div class="form-group">
                <label for="address">Delivery Address</label>
                <textarea id="address" required></textarea>
            </div>
        </div>

        <div class="delivery-options">
            <h3>Delivery Option</h3>
            <div class="delivery-option">
                <input type="radio" id="delivery" name="deliveryOption" value="delivery" checked>
                <label for="delivery">Delivery</label>
            </div>
            <div class="delivery-option">
                <input type="radio" id="pickup" name="deliveryOption" value="pickup">
                <label for="pickup">Pickup</label>
            </div>
        </div>

        <div class="cart-items">
            <!-- Cart items will be added dynamically -->
            <div class="empty-cart">
                <p>Your cart is empty. Please add items from the menu.</p>
            </div>
        </div>

        <div class="cart-summary hidden">
            <div class="summary-row">
                <span>Subtotal:</span>
                <span class="subtotal">$0.00</span>
            </div>
            <div class="summary-row">
                <span>Delivery Fee:</span>
                <span class="delivery-fee">$2.99</span>
            </div>
            <div class="summary-row total">
                <span>Total:</span>
                <span class="total-amount">$0.00</span>
            </div>
        </div>

        <div class="payment-methods">
            <h3>Payment Method</h3>
            <div class="payment-method">
                <input type="radio" id="cash" name="paymentMethod" value="cash" checked>
                <label for="cash">Cash on Delivery</label>
            </div>
            <div class="payment-method">
                <input type="radio" id="card" name="paymentMethod" value="card">
                <label for="card">Credit/Debit Card</label>
            </div>
        </div>

        <div class="special-notes">
            <label for="notes">Special Instructions</label>
            <textarea id="notes" placeholder="Any special requests or instructions..."></textarea>
        </div>

        <button class="checkout-btn">Place Order</button>
    </div>

   <script>
    // Menu data
const menuItems = [
    {
        id: 1,
        name: "Bruschetta",
        description: "Toasted bread topped with tomatoes, garlic, and fresh basil.",
        price: 7.99,
        image: "https://images.unsplash.com/photo-1572695157366-5e585ab2b69f",
        category: "starters"
    },
    {
        id: 2,
        name: "Caesar Salad",
        description: "Romaine lettuce, croutons, parmesan cheese with Caesar dressing.",
        price: 9.99,
        image: "https://images.unsplash.com/photo-1546793665-c74683f339c1",
        category: "starters"
    },
    {
        id: 3,
        name: "Margherita Pizza",
        description: "Classic pizza with tomato sauce, mozzarella, and basil.",
        price: 12.99,
        image: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002",
        category: "mains"
    },
    {
        id: 4,
        name: "Spaghetti Carbonara",
        description: "Pasta with creamy sauce, pancetta, and parmesan cheese.",
        price: 14.99,
        image: "https://images.unsplash.com/photo-1555949258-eb67b1ef0ceb",
        category: "mains"
    },
    {
        id: 5,
        name: "Grilled Salmon",
        description: "Fresh salmon fillet with lemon butter sauce and vegetables.",
        price: 18.99,
        image: "https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2",
        category: "mains"
    },
    {
        id: 6,
        name: "Chocolate Lava Cake",
        description: "Warm chocolate cake with a molten center, served with vanilla ice cream.",
        price: 8.99,
        image: "https://images.unsplash.com/photo-1564355808539-22fda35bed7e",
        category: "desserts"
    },
    {
        id: 7,
        name: "Tiramisu",
        description: "Classic Italian dessert with layers of coffee-soaked ladyfingers and mascarpone cream.",
        price: 7.99,
        image: "https://images.unsplash.com/photo-1563805042-7684c019e1cb",
        category: "desserts"
    },
    {
        id: 8,
        name: "Iced Tea",
        description: "Refreshing iced tea with lemon.",
        price: 3.99,
        image: "https://images.unsplash.com/photo-1559666126-84d0e0a9d6b1",
        category: "drinks"
    },
    {
        id: 9,
        name: "Red Wine",
        description: "Glass of house red wine.",
        price: 6.99,
        image: "https://images.unsplash.com/photo-1551218808-94e220e084d2",
        category: "drinks"
    }
];

// DOM elements
const menuGrid = document.querySelector('.menu-grid');
const cartItems = document.querySelector('.cart-items');
const emptyCart = document.querySelector('.empty-cart');
const cartSummary = document.querySelector('.cart-summary');
const subtotalEl = document.querySelector('.subtotal');
const totalAmountEl = document.querySelector('.total-amount');
const cartCount = document.querySelector('.cart-count');
const historyCount = document.querySelector('.history-count');
const checkoutBtn = document.querySelector('.checkout-btn');
const categoryBtns = document.querySelectorAll('.category-btn');
const cartPopup = document.querySelector('.cart-popup');
const cartOverlay = document.querySelector('.cart-overlay');
const closeCartBtn = document.querySelector('.close-cart');
const cartIcon = document.querySelector('.cart-icon');
const historyIcon = document.querySelector('.history-icon');
const menuSection = document.querySelector('.menu-section');
const historySection = document.querySelector('.history-section');
const historyList = document.querySelector('.history-list');
const noHistory = document.querySelector('.no-history');

// App state
let cart = [];
let orderHistory = [];

// Initialize the page
function init() {
    renderMenu();
    loadCart();
    loadOrderHistory();
    updateCartUI();
    updateHistoryUI();
    
    // Event listeners
    categoryBtns.forEach(btn => {
        btn.addEventListener('click', filterMenu);
    });
    
    checkoutBtn.addEventListener('click', placeOrder);
    
    // Cart popup events
    cartIcon.addEventListener('click', toggleCart);
    closeCartBtn.addEventListener('click', toggleCart);
    cartOverlay.addEventListener('click', toggleCart);
    
    // History button event
    historyIcon.addEventListener('click', toggleHistory);
    
    // Close cart with ESC key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && cartPopup.classList.contains('active')) {
            toggleCart();
        }
    });
}

// Toggle cart popup
function toggleCart() {
    cartPopup.classList.toggle('active');
    cartOverlay.classList.toggle('active');
}

// Toggle between menu and history views
function toggleHistory() {
    menuSection.style.display = menuSection.style.display === 'none' ? 'block' : 'none';
    historySection.style.display = historySection.style.display === 'block' ? 'none' : 'block';
    
    // Update active state
    if (historySection.style.display === 'block') {
        historyIcon.classList.add('active');
        cartIcon.classList.remove('active');
    } else {
        historyIcon.classList.remove('active');
        cartIcon.classList.remove('active');
    }
}

// Render menu items
function renderMenu(filter = 'all') {
    menuGrid.innerHTML = '';
    
    const filteredItems = filter === 'all' 
        ? menuItems 
        : menuItems.filter(item => item.category === filter);
    
    filteredItems.forEach(item => {
        const menuItem = document.createElement('div');
        menuItem.className = 'menu-item';
        menuItem.dataset.id = item.id;
        
        menuItem.innerHTML = `
            <div class="item-image">
                <img src="${item.image}" alt="${item.name}">
            </div>
            <div class="item-details">
                <h3 class="item-name">${item.name}</h3>
                <p class="item-description">${item.description}</p>
                <div class="item-footer">
                    <span class="item-price">$${item.price.toFixed(2)}</span>
                    <div class="quantity-control">
                        <button class="quantity-btn minus">-</button>
                        <input type="number" class="quantity-input" value="1" min="1">
                        <button class="quantity-btn plus">+</button>
                    </div>
                    <button class="add-to-cart">Add to Cart</button>
                </div>
            </div>
        `;
        
        menuGrid.appendChild(menuItem);
        
        // Add event listeners for the buttons
        const addToCartBtn = menuItem.querySelector('.add-to-cart');
        const minusBtn = menuItem.querySelector('.minus');
        const plusBtn = menuItem.querySelector('.plus');
        const quantityInput = menuItem.querySelector('.quantity-input');
        
        addToCartBtn.addEventListener('click', () => addToCart(item.id));
        minusBtn.addEventListener('click', () => {
            let value = parseInt(quantityInput.value);
            if (value > 1) {
                quantityInput.value = value - 1;
            }
        });
        plusBtn.addEventListener('click', () => {
            let value = parseInt(quantityInput.value);
            quantityInput.value = value + 1;
        });
    });
}

// Filter menu by category
function filterMenu(e) {
    const category = e.target.dataset.category;
    
    categoryBtns.forEach(btn => {
        btn.classList.remove('active');
    });
    
    e.target.classList.add('active');
    renderMenu(category);
}

// Add item to cart
function addToCart(itemId) {
    const menuItem = document.querySelector(`.menu-item[data-id="${itemId}"]`);
    const quantityInput = menuItem.querySelector('.quantity-input');
    const quantity = parseInt(quantityInput.value);
    
    const item = menuItems.find(item => item.id === itemId);
    
    // Check if item already in cart
    const existingItem = cart.find(cartItem => cartItem.id === itemId);
    
    if (existingItem) {
        existingItem.quantity += quantity;
    } else {
        cart.push({
            id: item.id,
            name: item.name,
            price: item.price,
            image: item.image,
            quantity: quantity
        });
    }
    
    saveCart();
    updateCartUI();
    
    // Reset quantity
    quantityInput.value = 1;
    
    // Show confirmation
    alert(`${quantity} ${item.name} added to cart!`);
    
    // Open cart popup
    toggleCart();
}

// Remove item from cart
function removeFromCart(itemId) {
    cart = cart.filter(item => item.id !== itemId);
    saveCart();
    updateCartUI();
}

// Update quantity in cart
function updateCartQuantity(itemId, newQuantity) {
    const cartItem = cart.find(item => item.id === itemId);
    
    if (cartItem) {
        if (newQuantity > 0) {
            cartItem.quantity = newQuantity;
        } else {
            removeFromCart(itemId);
        }
        
        saveCart();
        updateCartUI();
    }
}

// Save cart to localStorage
function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

// Load cart from localStorage
function loadCart() {
    const savedCart = localStorage.getItem('cart');
    if (savedCart) {
        cart = JSON.parse(savedCart);
    }
}

// Save order history to localStorage
function saveOrderHistory() {
    localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
}

// Load order history from localStorage
function loadOrderHistory() {
    const savedHistory = localStorage.getItem('orderHistory');
    if (savedHistory) {
        orderHistory = JSON.parse(savedHistory);
    }
}

// Update cart UI
function updateCartUI() {
    // Update cart count
    const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
    cartCount.textContent = totalItems;
    
    // Show/hide empty cart message
    if (cart.length === 0) {
        emptyCart.classList.remove('hidden');
        cartSummary.classList.add('hidden');
    } else {
        emptyCart.classList.add('hidden');
        cartSummary.classList.remove('hidden');
        
        // Render cart items
        cartItems.innerHTML = '';
        cart.forEach(item => {
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';
            cartItem.dataset.id = item.id;
            
            cartItem.innerHTML = `
                <div class="cart-item-details">
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div>
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">$${(item.price * item.quantity).toFixed(2)}</div>
                    </div>
                </div>
                <div class="quantity-control">
                    <button class="quantity-btn minus">-</button>
                    <input type="number" class="quantity-input" value="${item.quantity}" min="1">
                    <button class="quantity-btn plus">+</button>
                    <span class="remove-item"><i class="fas fa-trash"></i></span>
                </div>
            `;
            
            cartItems.appendChild(cartItem);
            
            // Add event listeners
            const minusBtn = cartItem.querySelector('.minus');
            const plusBtn = cartItem.querySelector('.plus');
            const quantityInput = cartItem.querySelector('.quantity-input');
            const removeBtn = cartItem.querySelector('.remove-item');
            
            minusBtn.addEventListener('click', () => {
                const newQuantity = parseInt(quantityInput.value) - 1;
                updateCartQuantity(item.id, newQuantity);
            });
            
            plusBtn.addEventListener('click', () => {
                const newQuantity = parseInt(quantityInput.value) + 1;
                updateCartQuantity(item.id, newQuantity);
            });
            
            quantityInput.addEventListener('change', () => {
                const newQuantity = parseInt(quantityInput.value);
                if (!isNaN(newQuantity)) {
                    updateCartQuantity(item.id, newQuantity);
                }
            });
            
            removeBtn.addEventListener('click', () => removeFromCart(item.id));
        });
        
        // Update totals
        const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const deliveryFee = 2.99;
        const total = subtotal + deliveryFee;
        
        subtotalEl.textContent = `$${subtotal.toFixed(2)}`;
        totalAmountEl.textContent = `$${total.toFixed(2)}`;
    }
}

// Update order history UI
function updateHistoryUI() {
    if (orderHistory.length === 0) {
        noHistory.classList.remove('hidden');
        historyList.innerHTML = '';
    } else {
        noHistory.classList.add('hidden');
        historyList.innerHTML = '';
        
        // Update history count
        historyCount.textContent = orderHistory.length;
        
        // Sort orders by date (newest first)
        const sortedHistory = [...orderHistory].sort((a, b) => new Date(b.date) - new Date(a.date));
        
        sortedHistory.forEach(order => {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            
            const orderDate = new Date(order.date);
            const formattedDate = orderDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            historyItem.innerHTML = `
                <div class="history-header">
                    <div class="history-date">${formattedDate}</div>
                    <div class="history-total">$${order.total.toFixed(2)}</div>
                </div>
                <div class="history-delivery">
                    <strong>${order.deliveryOption === 'delivery' ? 'Delivery' : 'Pickup'}</strong> | 
                    ${order.paymentMethod === 'cash' ? 'Cash on Delivery' : 'Credit/Debit Card'}
                </div>
                <div class="history-items">
                    ${order.items.map(item => `
                        <div class="history-item-row">
                            <div class="history-item-name">${item.quantity}x ${item.name}</div>
                            <div class="history-item-price">$${(item.price * item.quantity).toFixed(2)}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="history-summary">
                    <div class="history-summary-row">
                        <span>Subtotal:</span>
                        <span>$${order.subtotal.toFixed(2)}</span>
                    </div>
                    <div class="history-summary-row">
                        <span>Delivery Fee:</span>
                        <span>$${order.deliveryFee.toFixed(2)}</span>
                    </div>
                    <div class="history-summary-row total">
                        <span>Total:</span>
                        <span>$${order.total.toFixed(2)}</span>
                    </div>
                </div>
                ${order.notes ? `<div class="history-notes"><strong>Notes:</strong> ${order.notes}</div>` : ''}
            `;
            
            historyList.appendChild(historyItem);
        });
    }
}

// Place order
function placeOrder() {
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value;
    const address = document.getElementById('address').value;
    const deliveryOption = document.querySelector('input[name="deliveryOption"]:checked').value;
    const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
    const notes = document.getElementById('notes').value;
    
    // Simple validation
    if (!name || !phone || !address) {
        alert('Please fill in all required fields (Name, Phone, Address)');
        return;
    }
    
    if (cart.length === 0) {
        alert('Your cart is empty. Please add items before placing an order.');
        return;
    }
    
    // Create order object
    const order = {
        customer: { name, phone, email, address },
        deliveryOption,
        paymentMethod,
        notes,
        items: [...cart], // Create a copy of the cart
        subtotal: cart.reduce((total, item) => total + (item.price * item.quantity), 0),
        deliveryFee: 2.99,
        total: cart.reduce((total, item) => total + (item.price * item.quantity), 0) + 2.99,
        date: new Date().toISOString(),
        status: 'completed'
    };
    
    // Add to order history
    orderHistory.push(order);
    saveOrderHistory();
    updateHistoryUI();
    
    // Show confirmation
    alert(`Order placed successfully! Total: $${order.total.toFixed(2)}\nWe'll contact you shortly to confirm.`);
    
    // Clear cart
    cart = [];
    saveCart();
    updateCartUI();
    
    // Clear form
    document.getElementById('name').value = '';
    document.getElementById('phone').value = '';
    document.getElementById('email').value = '';
    document.getElementById('address').value = '';
    document.getElementById('notes').value = '';
    
    // Close cart popup
    toggleCart();
    
    // Switch to history view
    toggleHistory();
}

// Initialize the app
init();
   </script>
</body>
</html>